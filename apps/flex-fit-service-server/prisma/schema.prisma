datasource db {
  provider = "postgresql"
  url      = env("DB_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Partner {
  address      String?
  bookings     Booking[]
  contactEmail String?
  createdAt    DateTime   @default(now())
  facilities   Facility[] @relation(name: "FacilitiesOnPartner")
  facility     Facility?  @relation(name: "FacilityOnPartners", fields: [facilityId], references: [id])
  facilityId   String?
  id           String     @id @default(cuid())
  name         String?
  updatedAt    DateTime   @updatedAt
}

model Booking {
  bookingTime DateTime?
  createdAt   DateTime           @default(now())
  facilities  Facility[]         @relation(name: "BookingOnFacilities")
  facility    Facility?          @relation(name: "BookingsOnFacility", fields: [facilityId], references: [id])
  facilityId  String?
  id          String             @id @default(cuid())
  partner     Partner?           @relation(fields: [partnerId], references: [id])
  partnerId   String?
  status      EnumBookingStatus?
  updatedAt   DateTime           @updatedAt
  user        User?              @relation(fields: [userId], references: [id])
  userId      String?
}

model Facility {
  booking     Booking?  @relation(name: "BookingOnFacilities", fields: [bookingId], references: [id])
  bookingId   String?
  bookings    Booking[] @relation(name: "BookingsOnFacility")
  capacity    Int?
  createdAt   DateTime  @default(now())
  description String?
  id          String    @id @default(cuid())
  name        String?
  partner     Partner?  @relation(name: "FacilitiesOnPartner", fields: [partnerId], references: [id])
  partnerId   String?
  partners    Partner[] @relation(name: "FacilityOnPartners")
  updatedAt   DateTime  @updatedAt
}

model User {
  bookings  Booking[]
  createdAt DateTime  @default(now())
  email     String?   @unique
  firstName String?
  id        String    @id @default(cuid())
  lastName  String?
  name      String?
  password  String
  roles     Json
  updatedAt DateTime  @updatedAt
  username  String    @unique
}

enum EnumBookingStatus {
  Option1
}
